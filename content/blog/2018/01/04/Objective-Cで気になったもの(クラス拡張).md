---
title: "Objective-Cで気になったもの(クラス拡張)"
date: 2018-01-04T22:33:50+09:00
categories: ["Objective-C"]
draft: false
---

最近はiOSアプリの勉強をしています。
都合により、SwiftじゃなくてObjective-Cで書いています。
iOSアプリ開発では言語というよりSDKであるUIKitの使い方を覚えるほうが大事みたいなので、Objective-Cで勉強したとしても無駄にはなりません。

この記事ではObjective-Cで書いていて気になったものをちょっとメモ。

---

# 疑問

XcodeでViewControllerを作成するとヘッダーファイルと`.m`の実装ファイルができる。
ヘッダーの方には`@interface`のクラス宣言が書かれていて、`.m`の方で`@implementation`を使って実際にメソッドの処理を記述するようになっています。

しかし、自動生成して作ったファイルには実装のほうにも`@interface`がある。
これはなに？

```objectivec
// HogeController.m

#import "HogeViewController.h"

@interface HogeViewController ()

@end
// ↑これ

@implementation HogeViewController

/*
...
*/

@end
```

クラス宣言がダブってエラーになったりしないのでしょうか。というかここの中身は、なにも書かなくていいの？

そのうえ、クラス名のあとに`()`がついていて、ただのクラス宣言と違った特殊な雰囲気を醸し出しています。お前はいったいなんなんだ。

# クラス拡張

調べてみれば、これはクラス拡張というものらしいです。

Objective-Cには既存のクラスにあとづけでメソッドを追加できる**カテゴリ**という機能があります。
カテゴリは`@interface NSString (カテゴリ名)`のように、`@interface`のクラス名のあとにカテゴリをカッコで囲むようになっています。

そのカッコの中身が無くなったのが**クラス拡張**です。

実際にはカテゴリとクラス拡張はまったく違う機能みたいなのですが、今のところ似たようなものと理解しておけばいいと思います。

要するに、すでにクラス宣言した内容にあとづけでいろいろなメソッドやプロパティを追加できるのがクラス拡張です。

# 使いみち

privateなメソッドやプロパティを宣言するために使います。

ヘッダーファイルの`@interface`内に書かれている内容は、importしたファイルからは丸見えになります。
しかし、内部の処理は隠蔽して外部には見せたくないときもありますよね。

そういうときはクラス拡張の中に書くことで、ヘッダーファイルにはそのメソッドなどの情報がなくなりますので、内部だけで使用することができます。

JavaやC++では`private`を付ければいいのですが、見た目も特殊なObjective-Cではこういうテクニック？を使うみたいです。

# 参考

* [クラス拡張と無名カテゴリ - Qiita](https://qiita.com/edo_m18/items/e1f9b5d8c272853a5316)
* [カテゴリーとクラスエクステンション](http://www.toyship.org/archives/1464)