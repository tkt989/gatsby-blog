---
title: "ブログのホスト先をVPSからNetlifyに変えた"
date: 2018-02-13T22:02:11+09:00
categories: ["Hugo"]
draft: false
---

# このブログについて

このブログはHugoという静的サイトジェネレーターを使ってhtmlを作成しています。
生成したhtmlをConohaで契約しているVPSで公開しておりました。

VPS上では、リバースプロキシのNginxを立てて、いくつか個人用に立てているサーバーと一緒に、ブログ用のNginx on Dokcerのサーバーを立てているという構成です。

だけど、個人用のサーバーソフトも三日坊主でほとんど使わなくなり、実質ブログだけにしか使っていない状態。

そして、最近[Netlify](https://www.netlify.com/)というサービスのことを知り、もうVPSを棄ててこちらに乗り換えました。

# Netlifyに乗り換えた

Netlifyは、HugoやJekyllなどのサイトジェネレーターに対応していて、サイトの記事を更新してGithubにPushすれば自動的にビルドしてくれて、サイトを公開してくれます。

独自ドメインやSSLにも対応しているんです。
ブログを公開するだけなら、わざわざVPSよりもこちらのほうがいいのかなぁ、と。

# やっぱり無料がいい

VPSでブログを公開するのに一番不満なのが、やはりお金がかかることです。
一番安いプランを使っているので(630円くらい)高いわけではないのですが、できることなら無料で公開したい。

そんなわけで、ホスト先をNetlifyに変更した。
変えたあとに記事を書いているので、これを読んでいるときはすでに切り替わった後だと思います。

# エラー

Netlifyに乗り換えるのに、ちょっと躓いたので少しメモ。

Netlify上のHugoでサイトをビルドするときに`function "now" is not defined`というエラーが起きた。
これはHugoのバージョンを変えることで解消できました。

使用するHugoのバージョンは環境変数で設定できます。

名前は`HUGO_VERSION`にして値にHugoのバージョンを指定するだけです。

具体的には、Netlifyのサイトの設定画面で`Build & deploy`->`Build environment variables`で、`Edit variable`をクリックして新しい環境変数を追加。
上記の`HUGO_VERSION`を追加します。

![](/2018/02/netlify.png)

# 乗り換えての感想

Netlifyに変えてみての感想としては、アクセスログが見られないのは、少しつまらなくなってしまいました。まぁ今までそんなに見ていたわけではないですが。

あとそれと、表示速度は遅くなってます。
たぶんNetlifyは海外にサーバーがあるみたいなので、国内VPSよりかはどうしても遅くなってしまうでしょう。
でも耐えがたいほど遅いわけではないですし、これから先なにも問題が起こらなければこのままでいいかな。

少しの間ですが、VPSで自分でブログを作ったのはいい経験。

---

おまけで、GoogleAnalyticsで解析したブログのアクセス状況。

アクセス数はだいたい1日20人くらい。最弱レベルのブログです。

一番アクセスが多いのがGooglePlayServiceのFusedLocationの紹介をした記事。

[Google Play ServiceのFusedLocationで位置情報を取得 - tkt989's diary](https://blog.tkt989.info/2017/12/09/google-play-service%E3%81%AEfusedlocation%E3%81%A7%E4%BD%8D%E7%BD%AE%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97/)

休日は少ないけど、平日になるとアクセス数が少し多くなります。
これはAPIの使い方を仕事中に調べている方が多いからなのかな。
休日でもアクセス数が増えるようにしたいです。

こんな人知れぬブログですが、見に来てくれる人に感謝です。